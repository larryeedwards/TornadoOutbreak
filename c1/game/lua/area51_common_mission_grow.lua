{
		id = 1,
		name = 'flythrough_new',
		interpolation = 'avatar_opening',
		duration = 1.1,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-100.00,0.00,100.00,},orientation = {0.00,-0.17,0.00,0.98,},},
			{id = 2,name = 'KeyFrame2',interpolant = 0.04,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-136.11,-0.02,74.37,},orientation = {0.00,-0.19,0.00,0.98,},},
			{id = 3,name = 'KeyFrame3',interpolant = 0.11,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-252.75,46.32,231.58,},orientation = {-0.03,-0.35,0.07,0.93,},},
			{id = 4,name = 'KeyFrame4',interpolant = 0.15,target = 'avatar_opening',link = 'avatar_opening',fov = 1.22173,position = {-220.63,82.92,261.27,},orientation = {-0.06,-0.38,0.15,0.91,},},
			{id = 5,name = 'KeyFrame5',interpolant = 0.2,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-91.84,247.22,217.42,},orientation = {-0.18,-0.30,0.51,0.78,},},
			{id = 6,name = 'KeyFrame6',interpolant = 0.25,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {49.61,212.61,163.94,},orientation = {-0.26,-0.22,0.71,0.62,},},
			{id = 7,name = 'KeyFrame7',interpolant = 0.3,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {15.88,270.04,126.31,},orientation = {-0.21,-0.12,0.68,0.69,},},
			{id = 8,name = 'KeyFrame8',interpolant = 0.35,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {122.04,218.70,1.86,},orientation = {0.01,0.08,0.82,0.56,},},
			{id = 9,name = 'KeyFrame9',interpolant = 0.4,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {137.31,205.58,126.80,},orientation = {-0.22,-0.15,0.83,0.48,},},
			{id = 10,name = 'KeyFrame10',interpolant = 0.45,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {57.31,268.31,215.10,},orientation = {-0.23,-0.22,0.71,0.63,},},
			{id = 11,name = 'KeyFrame11',interpolant = 0.5,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-104.53,196.92,207.45,},orientation = {-0.12,-0.34,0.41,0.84,},},
			{id = 12,name = 'KeyFrame12',interpolant = 0.55,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-159.64,138.47,228.33,},orientation = {-0.08,-0.38,0.26,0.88,},},
			{id = 13,name = 'KeyFrame13',interpolant = 0.6,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-137.84,15.03,178.44,},orientation = {-0.01,-0.37,0.04,0.93,},},
			{id = 14,name = 'KeyFrame14',interpolant = 0.65,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-223.18,-87.54,170.32,},orientation = {0.06,-0.28,-0.16,0.94,},},
			{id = 15,name = 'KeyFrame15',interpolant = 0.7,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-125.61,-239.29,113.01,},orientation = {0.13,-0.15,-0.52,0.83,},},
			{id = 16,name = 'KeyFrame16',interpolant = 0.75,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-15.81,-240.68,93.66,},orientation = {0.10,-0.13,-0.64,0.75,},},
			{id = 17,name = 'KeyFrame17',interpolant = 0.8,target = 'avatar_opening',link = 'avatar_opening',fov = 1.047198,position = {-95.27,-193.13,83.82,},orientation = {0.09,-0.15,-0.49,0.85,},},
			{id = 18,name = 'KeyFrame18',interpolant = 0.85,target = 'avatar_opening',link = 'avatar_opening',fov = 0.9599317,position = {-298.98,43.63,184.56,},orientation = {-0.02,-0.26,0.06,0.96,},},
			{id = 19,name = 'KeyFrame19',interpolant = 0.91,target = 'avatar_opening',link = 'avatar_opening',fov = 0.8726652,position = {-99.05,375.58,207.54,},orientation = {-0.16,-0.18,0.56,0.79,},},
			{id = 20,name = 'KeyFrame20',interpolant = 0.93,target = 'avatar_opening',link = 'avatar_opening',fov = 0.9599311,position = {-85.73,350.58,228.87,},orientation = {-0.14,-0.24,0.56,0.78,},},
			{id = 21,name = 'KeyFrame21',interpolant = 0.96,target = 'avatar_opening',link = 'avatar_opening',fov = 1.134464,position = {12.74,321.59,237.23,},orientation = {-0.23,-0.23,0.66,0.68,},},
			{id = 22,name = 'KeyFrame22',interpolant = 0.98,target = 'avatar_opening',link = 'avatar_opening',fov = 1.22173,position = {-100.55,263.75,120.37,},orientation = {-0.15,-0.10,0.56,0.81,},},
			{id = 23,name = 'KeyFrame23',interpolant = 0.99,target = 'avatar_opening',link = 'avatar_opening',fov = 1.22173,position = {-70.26,325.16,39.44,},orientation = {-0.14,0.04,0.62,0.77,},},
			{id = 24,name = 'KeyFrame24',interpolant = 1,target = 'avatar_opening',link = 'avatar_opening',fov = 1.22173,position = {-45.00,300.00,20.00,},orientation = {0.07,0.08,0.67,0.73,},},
			{id = 25,name = 'KeyFrame25',interpolant = 1.1,target = 'avatar_opening',link = 'avatar_opening',fov = 1.22173,position = {-45.00,300.00,20.00,},orientation = {0.07,0.08,0.67,0.73,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'openingcamera',label = 'cinematic_start',},
			{id = 2,name = 'Sprites1',interpolant = 0.42,object = 'cine_firesprite_mgr',label = 'cinematic_sprites1',},
			{id = 3,name = 'Sprites2',interpolant = 0.63,object = 'cine_firesprite_mgr',label = 'cinematic_sprites2',},
			{id = 4,name = 'Sprites3',interpolant = 0.84,object = 'cine_firesprite_mgr',label = 'cinematic_sprites3',},
			{id = 5,name = 'Split',interpolant = 0.95,object = 'openingcamera',label = 'cinematic_split',},
			{id = 6,name = 'Shadow',interpolant = 0.95,object = 'openingcamera',label = 'cinematic_shadow',},
			{id = 8,name = 'End',interpolant = 0.99,object = 'openingcamera',label = 'cinematic_at_end',},
			{id = 9,name = 'vo1',interpolant = 0.6,object = 'opening_vo',label = 'Play_fly_far01',},
			{id = 10,name = 'vo2',interpolant = 0.68,object = 'opening_vo',label = 'Play_fly_far02',},
		},
	},
	{
		id = 2,
		name = 'closeup_01',
		interpolation = '__time__',
		duration = 6,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 1.047198,position = {-2503.22,16234.36,1111.98,},orientation = {0.15,-0.11,-0.79,0.58,},},
			{id = 2,name = 'KeyFrame2',interpolant = 2,target = '',link = '',fov = 1.047198,position = {-2102.06,14962.43,337.08,},orientation = {0.15,-0.11,-0.79,0.59,},},
			{id = 3,name = 'KeyFrame3',interpolant = 3.5,target = '',link = '',fov = 1.047198,position = {-1717.95,15064.92,-733.77,},orientation = {-0.15,0.07,0.91,-0.38,},},
			{id = 4,name = 'KeyFrame4',interpolant = 4.8,target = '',link = '',fov = 1.047198,position = {-1367.94,15418.04,-1726.86,},orientation = {-0.16,0.03,0.97,-0.19,},},
			{id = 5,name = 'KeyFrame5',interpolant = 6,target = '',link = '',fov = 1.047198,position = {-1239.47,16151.22,-1879.54,},orientation = {-0.09,-0.02,0.98,0.20,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'cinematic1',label = 'cinematic_ls_start',},
			{id = 2,name = 'Close',interpolant = 3.5,object = 'cinematic1',label = 'cinematic_ls_close',},
			{id = 3,name = 'End',interpolant = 6,object = 'cinematic1',label = 'cinematic_ls_at_end',},
		},
	},
	{
		id = 3,
		name = 'transition_01',
		interpolation = 'avatar_area1',
		duration = 1,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {-250.32,-83.94,161.36,},orientation = {0.06,-0.29,-0.13,0.95,},},
			{id = 3,name = 'KeyFrame3',interpolant = 0.1,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {-147.81,-265.73,201.59,},orientation = {0.04,-0.34,-0.42,0.84,},},
			{id = 5,name = 'KeyFrame5',interpolant = 0.2,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {170.38,-462.82,222.49,},orientation = {0.12,-0.16,-0.79,0.57,},},
			{id = 7,name = 'KeyFrame7',interpolant = 0.3,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {286.38,94.05,239.76,},orientation = {-0.35,-0.05,0.93,0.13,},},
			{id = 9,name = 'KeyFrame9',interpolant = 0.4,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {209.99,157.28,195.06,},orientation = {-0.32,-0.10,0.89,0.30,},},
			{id = 11,name = 'KeyFrame11',interpolant = 0.5,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {19.21,285.13,78.54,},orientation = {-0.10,-0.10,0.71,0.69,},},
			{id = 13,name = 'KeyFrame13',interpolant = 0.6,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {-102.52,393.35,63.30,},orientation = {-0.03,-0.04,0.60,0.80,},},
			{id = 15,name = 'KeyFrame15',interpolant = 0.7,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {-215.97,304.88,49.05,},orientation = {-0.02,-0.03,0.45,0.89,},},
			{id = 17,name = 'KeyFrame17',interpolant = 0.8,target = 'avatar_area1',link = 'avatar_area1',fov = 1.047198,position = {-150.38,377.24,62.34,},orientation = {-0.07,-0.05,0.54,0.83,},},
			{id = 18,name = 'KeyFrame18',interpolant = 0.85,target = 'avatar_area1',link = 'avatar_area1',fov = 0.9599317,position = {11.19,304.72,100.60,},orientation = {-0.13,-0.09,0.71,0.69,},},
			{id = 19,name = 'KeyFrame19',interpolant = 0.9,target = 'avatar_area1',link = 'avatar_area1',fov = 0.8726652,position = {106.39,362.95,111.26,},orientation = {-0.15,-0.06,0.78,0.61,},},
			{id = 20,name = 'KeyFrame20',interpolant = 0.95,target = 'avatar_area1',link = 'avatar_area1',fov = 0.9599311,position = {133.85,284.89,91.01,},orientation = {-0.17,-0.01,0.82,0.55,},},
			{id = 22,name = 'KeyFrame22',interpolant = 0.98,target = 'avatar_area1',link = 'avatar_area1',fov = 1.22173,position = {291.69,198.86,209.33,},orientation = {-0.30,-0.01,0.92,0.27,},},
			{id = 23,name = 'KeyFrame23',interpolant = 0.99,target = 'avatar_area1',link = 'avatar_area1',fov = 1.22173,position = {329.66,62.74,166.28,},orientation = {-0.14,0.01,0.98,0.11,},},
			{id = 24,name = 'KeyFrame24',interpolant = 1,target = 'avatar_area1',link = 'avatar_area1',fov = 1.22173,position = {330.00,62.00,166.00,},orientation = {-0.13,0.00,0.98,0.12,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'cinematic1',label = 'cinematic_start',},
			{id = 2,name = 'Totem',interpolant = 0.06,object = 'cinematic1',label = 'cinematic_rise_totem',},
			{id = 3,name = 'Split',interpolant = 0.9,object = 'cinematic1',label = 'cinematic_split',},
			{id = 4,name = 'Shadow',interpolant = 0.9,object = 'cinematic1',label = 'cinematic_shadow',},
			{id = 5,name = 'End',interpolant = 0.99,object = 'cinematic1',label = 'cinematic_at_end',},
			{id = 6,name = 'vo3',interpolant = 0.01,object = 'opening_vo',label = 'Play_fly_far03',},
			{id = 7,name = 'vo4',interpolant = 0.09,object = 'opening_vo',label = 'Play_fly_far04',},
		},
	},
	{
		id = 4,
		name = 'closeup_02',
		interpolation = '__time__',
		duration = 6,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 1.047198,position = {-4437.77,-9285.40,1122.47,},orientation = {0.11,-0.11,-0.67,0.72,},},
			{id = 2,name = 'KeyFrame2',interpolant = 2,target = '',link = '',fov = 1.047198,position = {-4511.00,-10163.77,356.38,},orientation = {0.11,-0.11,-0.67,0.72,},},
			{id = 3,name = 'KeyFrame3',interpolant = 3.5,target = '',link = '',fov = 1.047198,position = {-4443.77,-9790.15,-588.98,},orientation = {-0.13,0.17,0.60,-0.77,},},
			{id = 4,name = 'KeyFrame4',interpolant = 4.8,target = '',link = '',fov = 1.047198,position = {-4557.40,-9203.82,-1369.44,},orientation = {0.13,-0.27,-0.41,0.86,},},
			{id = 5,name = 'KeyFrame5',interpolant = 6,target = '',link = '',fov = 1.047198,position = {-4787.85,-9296.38,-1612.97,},orientation = {0.02,-0.06,-0.31,0.95,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'cinematic2',label = 'cinematic_ls_start',},
			{id = 2,name = 'Close',interpolant = 3.5,object = 'cinematic2',label = 'cinematic_ls_close',},
			{id = 3,name = 'End',interpolant = 6,object = 'cinematic2',label = 'cinematic_ls_at_end',},
		},
	},
	{
		id = 5,
		name = 'transition_02',
		interpolation = 'avatar_area2',
		duration = 1,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-232.64,-51.20,93.27,},orientation = {0.03,-0.21,-0.10,0.97,},},
			{id = 3,name = 'KeyFrame3',interpolant = 0.1,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-373.18,-5.58,329.58,},orientation = {0.00,-0.37,-0.01,0.93,},},
			{id = 5,name = 'KeyFrame5',interpolant = 0.2,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-325.17,-20.43,225.14,},orientation = {0.00,-0.36,-0.01,0.93,},},
			{id = 7,name = 'KeyFrame7',interpolant = 0.3,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-269.87,-219.17,187.19,},orientation = {0.07,-0.24,-0.33,0.91,},},
			{id = 9,name = 'KeyFrame9',interpolant = 0.4,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-132.38,-202.77,93.99,},orientation = {0.05,-0.13,-0.44,0.89,},},
			{id = 11,name = 'KeyFrame11',interpolant = 0.5,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-54.12,-340.10,96.58,},orientation = {0.09,-0.08,-0.64,0.76,},},
			{id = 13,name = 'KeyFrame13',interpolant = 0.6,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-93.70,-119.65,121.33,},orientation = {0.13,-0.29,-0.34,0.89,},},
			{id = 15,name = 'KeyFrame15',interpolant = 0.7,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-137.01,-124.13,124.99,},orientation = {0.10,-0.25,-0.33,0.90,},},
			{id = 17,name = 'KeyFrame17',interpolant = 0.8,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {-194.84,-98.58,112.79,},orientation = {0.05,-0.21,-0.21,0.95,},},
			{id = 18,name = 'KeyFrame18',interpolant = 0.85,target = 'avatar_area2',link = 'avatar_area2',fov = 0.9599317,position = {-98.30,25.29,41.33,},orientation = {-0.02,-0.14,0.09,0.99,},},
			{id = 19,name = 'KeyFrame19',interpolant = 0.9,target = 'avatar_area2',link = 'avatar_area2',fov = 0.8726652,position = {-106.49,1.69,28.04,},orientation = {0.00,-0.05,0.03,1.00,},},
			{id = 20,name = 'KeyFrame20',interpolant = 0.95,target = 'avatar_area2',link = 'avatar_area2',fov = 0.9599311,position = {-144.04,-83.33,33.63,},orientation = {0.06,-0.09,-0.23,0.97,},},
			{id = 22,name = 'KeyFrame22',interpolant = 0.98,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {99.99,-399.95,99.97,},orientation = {0.18,-0.01,-0.76,0.63,},},
			{id = 23,name = 'KeyFrame23',interpolant = 0.99,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {106.16,-615.25,57.67,},orientation = {0.11,0.08,-0.74,0.66,},},
			{id = 24,name = 'KeyFrame24',interpolant = 1,target = 'avatar_area2',link = 'avatar_area2',fov = 1.047198,position = {100.00,-600.00,57.00,},orientation = {0.10,0.07,-0.76,0.63,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'cinematic2',label = 'cinematic_start',},
			{id = 2,name = 'Totem',interpolant = 0.3,object = 'cinematic2',label = 'cinematic_rise_totem',},
			{id = 3,name = 'Split',interpolant = 0.9,object = 'cinematic2',label = 'cinematic_split',},
			{id = 4,name = 'Shadow',interpolant = 0.9,object = 'cinematic2',label = 'cinematic_shadow',},
			{id = 5,name = 'End',interpolant = 0.99,object = 'cinematic2',label = 'cinematic_at_end',},
			{id = 6,name = 'vo5',interpolant = 0.03,object = 'opening_vo',label = 'Play_fly_far05',},
			{id = 7,name = 'vo6',interpolant = 0.4,object = 'opening_vo',label = 'Play_fly_far06',},
		},
	},
	{
		id = 6,
		name = 'cine_bosssetupA',
		interpolation = '__time__',
		duration = 6,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 0.7854,position = {14974.02,11747.82,-1843.90,},orientation = {0.09,0.01,0.99,0.08,},},
			{id = 2,name = 'KeyFrame2',interpolant = 3,target = '',link = '',fov = 0.7854,position = {16749.50,12033.60,-1498.34,},orientation = {0.06,0.01,1.00,0.08,},},
			{id = 3,name = 'KeyFrame3',interpolant = 6,target = '',link = '',fov = 0.7854,position = {28436.42,8130.72,-1576.18,},orientation = {-0.05,0.00,1.00,-0.01,},},
		},
		events = 
		{
			{id = 1,name = 'Start',interpolant = 0,object = 'cinematic3',label = 'cinematic_start',},
			{id = 2,name = 'Totem',interpolant = 0.05,object = 'cinematic3',label = 'cinematic_rise_totem',},
			{id = 3,name = 'End',interpolant = 6,object = 'cinematic3',label = 'cinematic_at_end',},
		},
	},
	{
		id = 7,
		name = 'cine_bosssetupB',
		interpolation = '__time__',
		duration = 6,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 0.7854,position = {13239.37,1233.50,-1698.79,},orientation = {0.07,-0.04,0.88,-0.48,},},
			{id = 2,name = 'KeyFrame2',interpolant = 3,target = '',link = '',fov = 0.7854,position = {17611.11,9206.48,-1679.79,},orientation = {0.10,0.00,1.00,-0.03,},},
			{id = 3,name = 'KeyFrame3',interpolant = 6,target = '',link = '',fov = 0.7854,position = {14668.39,16667.45,-1583.00,},orientation = {0.05,0.02,0.95,0.31,},},
		},
		events = 
		{
			{id = 1,name = 'End',interpolant = 6,object = 'race_mgr',label = 'cinematic_at_end',},
		},
	},
}
--
--
--
--
--
--
--                                
--                       
--                                                 

function on_label(label)
  audio.postflyovervoevent(label)
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                         
--                                
--                  
--                                     
--                                                 
function on_gameplaymoduleactive()
  requestcomplete(true)
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                          
--                               
--                               
--                                                 
realcine = false
modulecompleted = false
finishnaturally = false
cine_firesprites = {}

function on_postload()
    cine_firesprites[1] = gomgr.getbyoid(3370)
    cine_firesprites[2] = gomgr.getbyoid(3374)
    cine_firesprites[3] = gomgr.getbyoid(3375)
    cine_firesprites[4] = gomgr.getbyoid(3376)
    cine_firesprites[5] = gomgr.getbyoid(3377)
    cine_firesprites[6] = gomgr.getbyoid(3378)
    cine_firesprites[7] = gomgr.getbyoid(3379)
    cine_firesprites[8] = gomgr.getbyoid(3380)
    cine_firesprites[9] = gomgr.getbyoid(3381)
    cine_firesprites[10] = gomgr.getbyoid(3382)
    cine_firesprites[11] = gomgr.getbyoid(3383)
    cine_firesprites[12] = gomgr.getbyoid(3384)
end

function on_gameplaymoduleactive()
  tornadomgr.enableskill(4)
  engine.pushmode(1)
  gomgr.getbyoid(3083):dispatchlabel("weatherphase0")
  gomgr.getbyoid(3124):dispatchlabel("hide")
  gomgr.getbyoid(3124):childbyoid(3125):childbyoid(3129):dispatchlabel("hide")
  gomgr.getbyoid(3138):dispatchlabel("hide")
  gomgr.getbyoid(3138):childbyoid(3125):childbyoid(3129):dispatchlabel("hide")
  gomgr.getbyoid(3141):dispatchlabel("hide")
  gomgr.getbyoid(3141):childbyoid(3125):childbyoid(3129):dispatchlabel("hide")
  
  realcine = true
  cinematic.play("flythrough_new")
 --                                   
  audio.postevent("enter_flying_to_next_area")
   
  checkforcomplete()

end

function on_label(label)

  if label == "cinematic_start" then
    gomgr.getbyoid(3368).path = gomgr.getbyoid(3100)
    gomgr.getbyoid(3369):dispatchlabel("cine_fly")
    gomgr.getbyoid(3136):removefromworld()
    gomgr.getbyoid(3241).trackedobject = gomgr.getbyoid(3368)
    gomgr.getbyoid(3242).trackedobject = gomgr.getbyoid(3369)
    gomgr.getbyoid(3085).curphase = 1
    gomgr.getbyoid(3084).curphase = 1
    gomgr.getbyoid(3080):dispatchlabel("weatherphase0")
    if realcine == false then
      cameramgr.screenfade(0, 0.0, 0.1, 1.5)
      gomgr.getbyoid(196):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(196):settext("textZone", 900)
      gomgr.getbyoid(196):start()
    end
    for i = 1, #cine_firesprites do
      cine_firesprites[i]:dispatchlabel("reset")
    end

  elseif label == "cinematic_split" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3368).path = gomgr.getbyoid(3099)
    end
    
  elseif label == "cinematic_shadow" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3236):dispatchlabel("grow")
      gomgr.getbyoid(3080):dispatchlabel("grow")
      gomgr.getbyoid(3080).curphase = 2
      gomgr.getbyoid(3113):addtoworld()
      finishnaturally = true
    end
    
  elseif label == "cinematic_avatar_at_end" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3136):dispatchlabel("loopingidle")
    end
    
  end
  
end

function checkforcomplete()
  if realcine == true and modulecompleted == false then
    pause(1.0)
    beginwait()
      gomgr.getbyoid(196):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(196):settext("textZone", 900)
      gomgr.getbyoid(196):start()
    endwait()
    cameramgr.screenfade(0, 0.7, 0.25, 1.0)
    
    if finishnaturally == false then
      for i = 1, #cine_firesprites do
        cine_firesprites[i]:dispatchlabel("remove")
      end
    end
    
    pause(0.8)
    
    modulecompleted = true
    realcine = false
    requestcomplete(true)
    else

  end
end

function on_gameplaymodulecomplete()
--                                   
  audio.postevent("exit_flying_to_next_area")
  gomgr.getbyoid(3136):removefromworld()
  gomgr.getbyoid(3369):removefromworld()
  gomgr.getbyoid(3136):dispatchlabel("loopingidleoff")
  gomgr.getbyoid(3368):removefromworld()
  cameramgr.activatecamerakind(1)
  engine.popmode(1)
  gomgr.getbyoid(3085).curphase = 0
  gomgr.getbyoid(3084).curphase = 0
end

--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                                
--                                                 

function on_label(label)
  if label == "cinematic_sprites1" then
    gomgr.getbyoid(3370):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3374):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3375):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3376):dispatchlabel("run")

  elseif label == "cinematic_sprites2" then
    gomgr.getbyoid(3377):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3378):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3379):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3380):dispatchlabel("run")

  elseif label == "cinematic_sprites3" then
    gomgr.getbyoid(3381):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3382):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3383):dispatchlabel("run")
    pause(0.3)
    gomgr.getbyoid(3384):dispatchlabel("run")

  end
end

--                                                 
--                                    
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
scientistCollected = 0
isActive = false
candraindirt = false

function on_label(label)

  --                                          
  if isActive == true and label == "scientistsCollected" and gomgr.getbyoid(3556).inworld == false then
    scientistCollected = scientistCollected + 1
    
    --                                                      
    if scientistCollected >= 17 and gomgr.getbyoid(16).fujitarating < 2.33 then
      tagamestats.unlockaward(0, 29)
    end
    
  end
end 

function on_gameplaymoduleupdate()
  if tornadomgr.getcombinedfujita() >= 2 and candraindirt == false then
    candraindirt = true
    gomgr.getbyoid(2918):removefromworld()
  end
  
end

function on_gameplaymoduleactive()

  isActive = true
  
  --                                                              
  scientistCollected = 0

  gomgr.getbyoid(3132):addtoworld()
  gomgr.getbyoid(3132):dispatchlabel("idle")
  gomgr.getbyoid(3124):childbyoid(3125):childbyoid(3129):dispatchlabel("opened")
end

function on_gameplaymodulecomplete(succeeded)

  isActive = false
  cameramgr.screenfade(0, 0.0, 0.1, 0.5)
  gomgr.getbyoid(3132):removefromworld()

end   

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                       
--                               
--                               
--                                    
--                                                 
realcine = false
modulecompleted = false

function on_gameplaymoduleactive()

  pause(0.1)
  engine.pushmode(1)
  gomgr.getbyoid(16):setfujitarating(1.0)
  gomgr.getbyoid(3556):setfujitarating(1.0)
  gomgr.getbyoid(3083):dispatchlabel("weatherphase0")
  
  realcine = true
  
  beginwait()
    cinematic.play("closeup_01")
  endwait()
  cinematic.play("transition_01")
  audio.postevent("enter_flying_to_next_area")
  
end

function on_label(label)
  if label == "cinematic_ls_start" then
    gomgr.getbyoid(3236):dispatchlabel("shrink")
    gomgr.getbyoid(3080).curphase = 1
    gomgr.getbyoid(3080):dispatchlabel("shrink")
    gomgr.getbyoid(3084).curphase = 1
    gomgr.getbyoid(3368):dispatchlabel("idle")
    gomgr.getbyoid(3123):dispatchlabel("idle")
    gomgr.getbyoid(3368):warp(gomgr.getbyoid(3053))
    gomgr.getbyoid(3123):warp(gomgr.getbyoid(3054))
    gomgr.getbyoid(3124):childbyoid(3125):childbyoid(3129):dispatchlabel("opened")
    
  elseif label == "cinematic_ls_close" then
    gomgr.getbyoid(3124):childbyoid(3125):childbyoid(3129):dispatchlabel("close")
    
  elseif label == "cinematic_ls_at_end" then
    gomgr.getbyoid(3080).curphase = 0

  elseif label == "cinematic_start" then
    gomgr.getbyoid(3232):dispatchlabel("remove")
    gomgr.getbyoid(3124):dispatchlabel("hide")
    gomgr.getbyoid(3124):childbyoid(3125):childbyoid(3129):dispatchlabel("hide")
    gomgr.getbyoid(3368).path = gomgr.getbyoid(3050)
    gomgr.getbyoid(3123):dispatchlabel("cine_fly_rampup")
    gomgr.getbyoid(3140):removefromworld()
    gomgr.getbyoid(3241).trackedobject = gomgr.getbyoid(3368)
    gomgr.getbyoid(3242).trackedobject = gomgr.getbyoid(3123)
    gomgr.getbyoid(3081):dispatchlabel("weatherphase0")
    gomgr.getbyoid(3085).curphase = 1
    gomgr.getbyoid(3084).curphase = 1
    cameramgr.screenfade(0, 0.0, 0.1, 1.0)

  elseif label == "cinematic_rise_totem" then
    gomgr.getbyoid(3232):dispatchlabel("rise")
    gomgr.getbyoid(3232):postaudioevent("PLAY_BOSS_SETUP_TOTEM_APPEARING")
    gomgr.getbyoid(3232):postaudioevent("LOOP_BOSS_SETUP_UNPOWERED_TOTEM_AMBIENT")
    
  elseif label == "cinematic_split" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3368).path = gomgr.getbyoid(3052)
    end
    
  elseif label == "cinematic_shadow" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3237):dispatchlabel("grow")
      gomgr.getbyoid(3081):dispatchlabel("grow")
      gomgr.getbyoid(3081).curphase = 2
      gomgr.getbyoid(3051):addtoworld()
    end
    
  elseif label == "cinematic_avatar_at_end" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3140):dispatchlabel("loopingidle")
      checkforcomplete()
    end
  
  end
  
end

function checkforcomplete()
  if realcine == true and modulecompleted == false then
    beginwait()
      gomgr.getbyoid(196):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(196):settext("textZone", 901)
      gomgr.getbyoid(196):start()
    endwait()
    cameramgr.screenfade(0, 0.7, 0.25, 1.0)
    
    pause(0.8)
    modulecompleted = true
    realcine = false
    requestcomplete(true)
  else

  end
end

function on_gameplaymodulecomplete()
  audio.postevent("exit_flying_to_next_area")
  gomgr.getbyoid(3368):removefromworld()
  gomgr.getbyoid(3140):dispatchlabel("loopingidleoff")
  cameramgr.activatecamerakind(1)
  engine.popmode(1)
  gomgr.getbyoid(3085).curphase = 0
  gomgr.getbyoid(3084).curphase = 0
end

--                                                 
--                                    
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
                                      
--                                    
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
                             ?               |growmission2    cgotagameplaymodule.xgd    Y cgotagrowmission.xgd    ] )area51_common_mission_grow.lua: line 377    `  <--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                    
--                         
--                             
--                             
--                       
--                           
--                         
--                                    
--                        
--                         
--                                         
--                                              
--                                                    
--                                       
--                       
--                                                
--                                             
--                                      
--                                     
--                                                 

function on_gameplaymoduleactive()
  gomgr.getbyoid(3139):addtoworld()
  gomgr.getbyoid(3139):dispatchlabel("idle")
  gomgr.getbyoid(3138):childbyoid(3125):childbyoid(3129):dispatchlabel("opened")
end

function on_gameplaymodulecomplete(succeeded)
  if succeeded then
    cameramgr.screenfade(0, 0.0, 0.1, 0.5)
    gomgr.getbyoid(3139):removefromworld()
  end
end
--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                       
--                               
--                               
--                                    
--                                                 

realcine = false
modulecompleted = false

function on_gameplaymoduleactive()

  pause(0.1)
  engine.pushmode(1)
  gomgr.getbyoid(16):setfujitarating(1.0)
  gomgr.getbyoid(3556):setfujitarating(1.0)
  gomgr.getbyoid(3083):dispatchlabel("weatherphase0")
  
  realcine = true
  
  beginwait()
    cinematic.play("closeup_02")
  endwait()
  cinematic.play("transition_02")
  audio.postevent("enter_flying_to_next_area")
  
end

function on_label(label)
  if label == "cinematic_ls_start" then
    gomgr.getbyoid(3237):dispatchlabel("shrink")
    gomgr.getbyoid(3081).curphase = 1
    gomgr.getbyoid(3081):dispatchlabel("shrink")
    gomgr.getbyoid(3084).curphase = 1
    gomgr.getbyoid(3368):dispatchlabel("idle")
    gomgr.getbyoid(3137):dispatchlabel("idle")
    gomgr.getbyoid(3368):warp(gomgr.getbyoid(3061))
    gomgr.getbyoid(3137):warp(gomgr.getbyoid(3062))
    gomgr.getbyoid(3138):childbyoid(3125):childbyoid(3129):dispatchlabel("opened")
    gomgr.getbyoid(3232):dispatchlabel("restartfires")
    
  elseif label == "cinematic_ls_close" then
    gomgr.getbyoid(3138):childbyoid(3125):childbyoid(3129):dispatchlabel("close")
    
  elseif label == "cinematic_ls_at_end" then
    gomgr.getbyoid(3081).curphase = 0

  elseif label == "cinematic_start" then
    gomgr.getbyoid(3234):dispatchlabel("remove")
    gomgr.getbyoid(3138):dispatchlabel("hide")
    gomgr.getbyoid(3138):childbyoid(3125):childbyoid(3129):dispatchlabel("hide")
    gomgr.getbyoid(3368).path = gomgr.getbyoid(3058)
    gomgr.getbyoid(3137):dispatchlabel("cine_fly_rampup")
    gomgr.getbyoid(3142):removefromworld()
    gomgr.getbyoid(3241).trackedobject = gomgr.getbyoid(3368)
    gomgr.getbyoid(3242).trackedobject = gomgr.getbyoid(3137)
    gomgr.getbyoid(3082):dispatchlabel("weatherphase0")
    gomgr.getbyoid(3085).curphase = 1
    gomgr.getbyoid(3084).curphase = 1
    cameramgr.screenfade(0, 0.0, 0.1, 1.0)

  elseif label == "cinematic_rise_totem" then
    gomgr.getbyoid(3234):dispatchlabel("rise")
    gomgr.getbyoid(3234):postaudioevent("PLAY_BOSS_SETUP_TOTEM_APPEARING")
    gomgr.getbyoid(3234):postaudioevent("LOOP_BOSS_SETUP_UNPOWERED_TOTEM_AMBIENT")
    
  elseif label == "cinematic_split" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3368).path = gomgr.getbyoid(3060)
    end
    
  elseif label == "cinematic_shadow" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3238):dispatchlabel("grow")
      gomgr.getbyoid(3082):dispatchlabel("grow")
      gomgr.getbyoid(3082).curphase = 2
      gomgr.getbyoid(3059):addtoworld()
    end
    
  elseif label == "cinematic_avatar_at_end" then
    if modulecompleted == false or realcine == false then
      gomgr.getbyoid(3142):dispatchlabel("loopingidle")
      checkforcomplete()
    end
  
  end
  
end

function checkforcomplete()
  if realcine == true and modulecompleted == false then
    beginwait()
      gomgr.getbyoid(196):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(196):settext("textZone", 902)
      gomgr.getbyoid(196):start()
    endwait()
    cameramgr.screenfade(0, 0.7, 0.25, 1.0)
    
    pause(0.8)
    modulecompleted = true
    realcine = false
    requestcomplete(true)
  else

  end
end

function on_gameplaymodulecomplete()
  audio.postevent("exit_flying_to_next_area")
  gomgr.getbyoid(3368):removefromworld()
  gomgr.getbyoid(3142):dispatchlabel("loopingidleoff")
  cameramgr.activatecamerakind(1)
  engine.popmode(1)
  gomgr.getbyoid(3085).curphase = 0
  gomgr.getbyoid(3084).curphase = 0
end

--                                                 
--                                    
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
                             ?         ,     |growmission3    cgotagameplaymodule.xgd    Y cgotagrowmission.xgd    ] )area51_common_mission_grow.lua: line 529    b  H--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                    
--                         
--                             
--                             
--                      
--                           
--                         
--                                    
--                        
--                         
--                                         
--                                              
--                                                    
--                                       
--                       
--                                                
--                  
--                                             
--                                      
--                                     
--                                                 
canbreakoutoffence = false

function on_gameplaymoduleactive()
  --                           
  gomgr.getbyoid(3082):dispatchlabel("weatherphase2")
  canbreakoutoffence = false
  gomgr.getbyoid(3143):addtoworld()
  gomgr.getbyoid(3143):dispatchlabel("idle")
  gomgr.getbyoid(3141):childbyoid(3125):childbyoid(3129):dispatchlabel("opened")
end


function on_gameplaymoduleupdate()
  if tornadomgr.getcombinedfujita() >= 2.7 and canbreakoutoffence == false then
    canbreakoutoffence = true
    gomgr.getbyoid(3082):dispatchlabel("weatherphase1")
  end
  
end

function on_gameplaymodulecomplete(succeeded)
  if succeeded then
  	--                                              
  	gomgr.getbyoid(3083):dispatchlabel("weatherphase1")
  	gomgr.getbyoid(3082):dispatchlabel("weatherphase0")

  	--               
  	tornadomgr.stormchambertimer:finish()
	--                         
	gomgr.getbyoid(3143):removefromworld()
  end
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
        ?      8?    ,    d          @      2Cp    =  >  @                    |cinematic3    cgotagameplaymodule.xgd    Y )area51_common_mission_grow.lua: line 584    c  =--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                       
--                               
--                                    
--                                    
--                                                 

function on_gameplaymoduleactive()
  engine.pushmode(1)
  audio.postevent("enter_flying_to_next_area")
  beginwait()
    cinematic.play("cine_bosssetupA")
  endwait()
  requestcomplete(true)
  audio.postevent("exit_flying_to_next_area")
end

function on_gameplaymodulecomplete(succeeded)
  audio.postevent("LOOP_BOSS_SETUP_STORM_BUILDING_STAGE1")
   engine.popmode(1)
end

function on_label(label)

  if label == "cinematic_start" then
    gomgr.getbyoid(3235):dispatchlabel("remove")
    gomgr.getbyoid(3232):dispatchlabel("restartfires")
    gomgr.getbyoid(3234):dispatchlabel("restartfires")
    
  elseif label == "cinematic_rise_totem" then
    gomgr.getbyoid(3235):dispatchlabel("rise")
    gomgr.getbyoid(3235):postaudioevent("PLAY_BOSS_SETUP_TOTEM_APPEARING")
    gomgr.getbyoid(3235):postaudioevent("LOOP_BOSS_SETUP_UNPOWERED_TOTEM_AMBIENT")

    gomgr.getbyoid(3584):dispatchlabel("doit")
    
  end
end

--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
                             ?               |gate_adder    )area51_common_mission_grow.lua: line 624    d  &--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                       
--                                                 

function add_gate(gate)
  gate:addtoworld()
  gate:childbyoid(3148):addtoworld()
  gate:lowergate(10000, 0.5)
  pause(0.1)
  gate:activateshockwave()
end

function on_label(label)
  if label == "doit" then
    pause(2)
    add_gate(gomgr.getbyoid(3174))
    add_gate(gomgr.getbyoid(3175))
    add_gate(gomgr.getbyoid(3176))
    add_gate(gomgr.getbyoid(3177))
    add_gate(gomgr.getbyoid(3178))
    add_gate(gomgr.getbyoid(3179))
    add_gate(gomgr.getbyoid(3180))
    add_gate(gomgr.getbyoid(3181))
    add_gate(gomgr.getbyoid(3182))
    add_gate(gomgr.getbyoid(3183))
    add_gate(gomgr.getbyoid(3184))
    add_gate(gomgr.getbyoid(3185))
    add_gate(gomgr.getbyoid(3186))
    add_gate(gomgr.getbyoid(3187))
    add_gate(gomgr.getbyoid(3188))
    add_gate(gomgr.getbyoid(3189))
    add_gate(gomgr.getbyoid(3190))
    add_gate(gomgr.getbyoid(3191))
    add_gate(gomgr.getbyoid(3192))
    add_gate(gomgr.getbyoid(3193))
    add_gate(gomgr.getbyoid(3144))
    add_gate(gomgr.getbyoid(3165))
    add_gate(gomgr.getbyoid(3166))
    add_gate(gomgr.getbyoid(3167))
    add_gate(gomgr.getbyoid(3168))
    add_gate(gomgr.getbyoid(3169))
    add_gate(gomgr.getbyoid(3170))
    add_gate(gomgr.getbyoid(3171))
    add_gate(gomgr.getbyoid(3172))
    add_gate(gomgr.getbyoid(3173))
  end       
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
  A  D    ?                  ?                  ?                  ?       %     |mission_bosssetup    cgotagameplaymodule.xgd    Y )area51_common_mission_grow.lua: line 673    e  $--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                              
--                             
--                                       
--                       
--                       
--                       
--                                    
--                                                 

function on_postload()
  racemgr = gomgr.getbyoid(3590)
  
  racemgr:addtrigger(gomgr.getbyoid(3174))
  racemgr:addtrigger(gomgr.getbyoid(3175))
  racemgr:addtrigger(gomgr.getbyoid(3176))
  racemgr:addtrigger(gomgr.getbyoid(3177))
  racemgr:addtrigger(gomgr.getbyoid(3178))
  racemgr:addtrigger(gomgr.getbyoid(3179))
  racemgr:addtrigger(gomgr.getbyoid(3180))
  racemgr:addtrigger(gomgr.getbyoid(3181))
  racemgr:addtrigger(gomgr.getbyoid(3182))
  racemgr:addtrigger(gomgr.getbyoid(3183))
  racemgr:addtrigger(gomgr.getbyoid(3184))
  racemgr:addtrigger(gomgr.getbyoid(3185))
  racemgr:addtrigger(gomgr.getbyoid(3186))
  racemgr:addtrigger(gomgr.getbyoid(3187))
  racemgr:addtrigger(gomgr.getbyoid(3188))
  racemgr:addtrigger(gomgr.getbyoid(3189))
  racemgr:addtrigger(gomgr.getbyoid(3190))
  racemgr:addtrigger(gomgr.getbyoid(3191))
  racemgr:addtrigger(gomgr.getbyoid(3192))
  racemgr:addtrigger(gomgr.getbyoid(3193))
  racemgr:addtrigger(gomgr.getbyoid(3144))
  racemgr:addtrigger(gomgr.getbyoid(3165))
  racemgr:addtrigger(gomgr.getbyoid(3166))
  racemgr:addtrigger(gomgr.getbyoid(3167))
  racemgr:addtrigger(gomgr.getbyoid(3168))
  racemgr:addtrigger(gomgr.getbyoid(3169))
  racemgr:addtrigger(gomgr.getbyoid(3170))
  racemgr:addtrigger(gomgr.getbyoid(3171))
  racemgr:addtrigger(gomgr.getbyoid(3172))
  racemgr:addtrigger(gomgr.getbyoid(3173))
end

function add_glows()
  gomgr.getbyoid(3194):addtoworld()
  gomgr.getbyoid(3195):addtoworld()
  gomgr.getbyoid(3196):addtoworld()
  gomgr.getbyoid(3197):addtoworld()
  gomgr.getbyoid(3198):addtoworld()
  gomgr.getbyoid(3199):addtoworld()
  gomgr.getbyoid(3200):addtoworld()
  gomgr.getbyoid(3201):addtoworld()
  gomgr.getbyoid(3202):addtoworld()
  gomgr.getbyoid(3203):addtoworld()
  gomgr.getbyoid(3204):addtoworld()
  gomgr.getbyoid(3205):addtoworld()
  gomgr.getbyoid(3206):addtoworld()
  gomgr.getbyoid(3207):addtoworld()
  gomgr.getbyoid(3208):addtoworld()
  gomgr.getbyoid(3209):addtoworld()
  gomgr.getbyoid(3210):addtoworld()
  gomgr.getbyoid(3211):addtoworld()
  gomgr.getbyoid(3212):addtoworld()
  gomgr.getbyoid(3213):addtoworld()
  gomgr.getbyoid(3214):addtoworld()
  gomgr.getbyoid(3215):addtoworld()
  gomgr.getbyoid(3216):addtoworld()
  gomgr.getbyoid(3217):addtoworld()
  gomgr.getbyoid(3218):addtoworld()
  gomgr.getbyoid(3219):addtoworld()
  gomgr.getbyoid(3220):addtoworld()
  gomgr.getbyoid(3221):addtoworld()
  gomgr.getbyoid(3222):addtoworld()
  gomgr.getbyoid(3223):addtoworld()
end

function on_gameplaymoduleactive()

  while (tornadomgr.firstactivetornado == nil) do
	  pause(0.1)
	end

  --                                              
  gomgr.getbyoid(3083):dispatchlabel("weatherphase1")
  gomgr.getbyoid(3081):dispatchlabel("weatherphase0")
  
  --               
  tornadomgr.stormchambertimer:finish()
  tornadomgr.showtargetfujitainfo = false
  gomgr.getbyoid(16):setfujitarating(2.0)
  tornadomgr.setfujitamax(2.0)
  
  local introText = {
    1492,
    1493,
    1494,
  }
  
  --               
  gomgr.getbyoid(3405):dispatchlabel("reset")
  gomgr.getbyoid(16):warp(gomgr.getbyoid(3068))
	
	--                
  gomgr.getbyoid(3071):freeze()
  engine.pushmode(1)
  
  --           
  for i = 1, #introText do
  
    if i == 2 then
      --                   
      pause(0.5)
      gomgr.getbyoid(3174):childbyoid(3147):reset()
      gomgr.getbyoid(3174):childbyoid(3147):start()
      pause(1)
    elseif i == 3 then
      pause(0.5)
      gomgr.getbyoid(3174):childbyoid(3147):hardstop()
      gomgr.getbyoid(3174):childbyoid(3164):reset()
      gomgr.getbyoid(3174):childbyoid(3164):start()
      gomgr.getbyoid(3174):childbyoid(3164).particlesizepercentadjustment = 3.0
      gomgr.getbyoid(3174):childbyoid(3148):removefromworld()
      audio.postevent("PLAY_SPRITERACE_GATETRIGGERED_EXPLODE")
      pause(2)
      gomgr.getbyoid(3174):lowergate(10000, 0.5)
      gomgr.getbyoid(3174):childbyoid(3148):addtoworld()
    end
    
    gomgr.getbyoid(3572).location = 1
    gomgr.getbyoid(3572).buttonon = true
    gomgr.getbyoid(3572):settext(" textbox ", introText[i])
    gomgr.getbyoid(3572).finishonbuttonpress = true --               
    beginwait()
      gomgr.getbyoid(3572):start()
    endwait()
  end
  
  gomgr.getbyoid(3174):childbyoid(3148):addtoworld()
  
  --                 
  if (playermgr.isinmultiplayer and not tagamestats.hasshownmpracetutorial) then
    local mptext = { 1783, 1784 }
    for i=1, #mptext do
      gomgr.getbyoid(3572).location = 0
      gomgr.getbyoid(3572).buttonon = true
      if (i==1) then
        gomgr.getbyoid(3572).portrait = 2
      else
        gomgr.getbyoid(3572).portrait = 3
      end
      gomgr.getbyoid(3572):settext(" textbox ", mptext[i])
      beginwait()
        gomgr.getbyoid(3572):start()
      endwait()
    end
    tagamestats.hasshownmpracetutorial = true
  end
    
  --         
  gomgr.getbyoid(3071):unfreeze()
  engine.popmode(1)
  
  gomgr.getbyoid(3405):removefromworld()
  gomgr.getbyoid(3055):removefromworld()
  gomgr.getbyoid(3063):removefromworld()
  gomgr.getbyoid(3067):removefromworld()

  gomgr.getbyoid(3590):startrace()
  
  math.randomseed(time.t)
  local rand = math.random(1, 2)
  if rand == 1 then
    tornadomgr.toggletpotdriver()
  end

  add_glows()
  
  --                                  
  gomgr.getbyoid(3227):addtoworld()
  gomgr.getbyoid(3228):addtoworld()
  gomgr.getbyoid(3229):addtoworld()

  --      
  audio.postevent("LOOP_BOSS_SETUP_STORM_BUILDING_STAGE1")
  audio.postevent("A51_WIND_RACE")
  pause(0.1)
  audio.setstate("EXCITEMENT_LEVEL", "world1_tornado1")
end

--                                                 
--                                      
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
      @          /          ?         ;     !
|race_avatar    avatar_cinematic_new.xgo    / Character_Drill_Sargent A  D         Q?                 A         ?           BH      D      B4      B        c                              ?                  ?                  ?                  ?  D2mD/                 |race_glow     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?            !
|race_target    avatar2_cinematic.xgo    E )area51_common_mission_grow.lua: line 878    f  M--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                   
--                        
--                     
--                  
--                                                 

function on_raceaction(label, addtl)
  if label == "start" then
    scale = 5.0
    startanim("flying", 0, 1, 1, 0)
    gomgr.getbyoid(3587):stop()
    gomgr.getbyoid(3587):reset()
    gomgr.getbyoid(3587):start()
    gomgr.getbyoid(3587).externalmatrix = gomgr.getbyoid(3588)
    gomgr.getbyoid(3587).particlesizepercentadjustment = 0.5
  elseif label == "stop" then
    --  
  elseif label == "firstgate" then
    scale = 5.0
  elseif label == "gearup" then
    if addtl == 1 then
      scale = 4.0
    elseif addtl == 2 then
      scale = 3.0
    elseif addtl == 3 then
      scale = 2.0
    end
  end
end

function on_atpathend()
--                                                                                        
end

--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
 Character_Drill_Sargent A  D         V?                 A         ?            BH      D      B4      B        c        B      CH            ?                  ?                  ?                  ?  D2mD/                 |race_target|trail     fx_general A  D         ,  ?                  ?                  ?              Bz?  B              ?                  ?                  ?              Bz?              |race_target|fx_skadoosh     fx_general A  D         -  ?                  ?                  ?                  ?  B              ?                  ?                  ?                  ?              |race_target|fx_swirlies     fx_general A  D         .  ?                  ?                  ?      BeCa+?  B              ?                  ?                  ?      BeCa+?       ?      |camera_zoomout    )area51_common_mission_grow.lua: line 913    g  --
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                           
--                                                 

--                                                                                                  
function on_label(label)
  if label == "doit" then
    zoom = 75
    for i = 1, 1000 do
      zoom = zoom + 1
      cameramgr.orbitoffsetz = 500 + zoom * i
      pause(0.02)
    end
  end
end

--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
  A  D    ?                  ?                  ?                  ?       "N     %
|race_mgr    )area51_common_mission_grow.lua: line 930    h  !&--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                     
--                                
--                     
--                       
--                       
--                       
--                       
--                       
--                       
--                       
--                       
--                       
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                         
--                          
--                              
--                                
--                              
--                               
--                                                 

gear = 0

realfinish = false

function on_label(label)

  if label == "cinematic_start" then
    addstormendfx()
    
  end
end

function addstormendfx()
    --                
    gomgr.getbyoid(3245):addtoworld()
    gomgr.getbyoid(3250):addtoworld()
    gomgr.getbyoid(3252):addtoworld()
    
    gomgr.getbyoid(3083):dispatchlabel("weatherphase0")
    
    gomgr.getbyoid(3253):addtoworld()
    gomgr.getbyoid(3253):childbyoid(3254):reset()
    gomgr.getbyoid(3253):childbyoid(3254):start()
    gomgr.getbyoid(3255):addtoworld()
    
    gomgr.getbyoid(3229):dispatchlabel("up")
--                                                                      
--                                   
end

function on_raceaction(message, addtl)
  if message == "finished" then

    gomgr.getbyoid(3098):removefromworld()
 
    realfinish = true
    beginwait()
      cinematic.play("cine_bosssetupB")
    endwait()
    gomgr.getbyoid(3585):requestcomplete(true)
    
  elseif message == "flyover" then
    engine.pushmode(1)
    gomgr.getbyoid(3098).zoomfactor = 5.0
    
    cameramgr.matchcameras(4, 1)
    cameramgr.orbitlookat = gomgr.getbyoid(3586)
    cameramgr.activatecamerakind(4)
    gomgr.getbyoid(3586):startanim("flying")
    
    gomgr.getbyoid(3589):dispatchlabel("doit")
     
  elseif message == "failed" then
    pause(1)
    
    beginwait()
      uimgr.playracefail()
    endwait()
    
    if gear > 0 then
      gomgr.getbyoid(3227):stopallanims()
      gomgr.getbyoid(3227):startanim("down", 0, 1, 1, 1)
      if gear > 1 then
        gomgr.getbyoid(3228):stopallanims()
        gomgr.getbyoid(3228):startanim("down", 0, 1, 1, 1)
      end
    end
    
    gear = 0

    gomgr.getbyoid(3243):removefromworld()
    gomgr.getbyoid(3244):removefromworld()
    gomgr.getbyoid(3245):removefromworld()
    gomgr.getbyoid(3246):removefromworld()
    gomgr.getbyoid(3247):removefromworld()
    gomgr.getbyoid(3248):removefromworld()
    gomgr.getbyoid(3249):removefromworld()
    gomgr.getbyoid(3250):removefromworld()
    gomgr.getbyoid(3251):removefromworld()
    gomgr.getbyoid(3252):removefromworld()
    
    gomgr.getbyoid(16):warp(gomgr.getbyoid(3068))
    gomgr.getbyoid(3590):startrace()
    
    audio.postevent("LOOP_BOSS_SETUP_STORM_BUILDING_STAGE1")
    audio.setstate("EXCITEMENT_LEVEL", "world1_tornado1")

  elseif message == "gearup" then
    if addtl == 1 then
      --      
      audio.postevent("LOOP_BOSS_SETUP_STORM_BUILDING_STAGE2")
      audio.setstate("EXCITEMENT_LEVEL", "world1_tornado2")

      --           
      gomgr.getbyoid(3243):addtoworld()
      gomgr.getbyoid(3246):addtoworld()
      gomgr.getbyoid(3247):addtoworld()
      gomgr.getbyoid(3251):addtoworld()
      
      gomgr.getbyoid(3227):dispatchlabel("up")

--                                        
--                                         
      
      gear = 1
    elseif addtl == 2 then
      --      
      audio.postevent("LOOP_BOSS_SETUP_STORM_BUILDING_STAGE3")
      audio.setstate("EXCITEMENT_LEVEL", "world1_tornado3")

      --                
      gomgr.getbyoid(3244):addtoworld()
      gomgr.getbyoid(3248):addtoworld()
      gomgr.getbyoid(3249):addtoworld()

      gomgr.getbyoid(3228):dispatchlabel("up")

--                                       
--                                         
      
      gear = 2
    end
  elseif message == "speedup" then
    gomgr.getbyoid(3098):addtoworld()
    gomgr.getbyoid(3141):childbyoid(3125):childbyoid(3129):childbyoid(619):removefromworld()
  elseif message == "slowdown" then
    gomgr.getbyoid(3098):removefromworld()
    gomgr.getbyoid(3141):childbyoid(3125):childbyoid(3129):childbyoid(619):addtoworld()
  end
end
--                                                 
--                                     
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                    
--                      
--                     
--                                
--                    
--                                                 
function on_postload()
  childbyoid(619):removefromworld()
end
--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
 Building_Research_Shack A  D         ?                A     A  @@            BH      D      B4      B          c             DH    ?                  ?                  ?                  ?  CD>          '    	 
   
                     ! " # $ % & ' ( ) * + , 
 - . / 0 1 2 3 4 5 6  7       	 
   
                     ! " # $  - . / 0 1                                                       |debris5|collision_spline      A  D     @L  ?                  ?                  ?      LBqhB{?  B    ?                  ?                  ?      LBqhB{?  D   CCvlC%C%vCCv            8|debris5|e1_fx_explode_building_med_gameobject_grainary     fx_general A  D           6?        6                ?      B];0At$?  B               6?        6                ?      B];0At$?              4|debris5|e2_fx_explode_barn_low_gameobject_grainary     fx_general A  D           6?        6                ?      B];0At?  B               6?        6                ?      B];0At?              8|debris5|e3_fx_explode_building_med_gameobject_grainary     fx_general A  D           6?        6                ?      B];0At$?  B               6?        6                ?      B];0At$?              ;|debris5|od0_fx_shaking_research_shack_gameobject_grainary     
FSsparkle A  D          ?L        L                ?      B];0At?  B"r              ?L        L                ?      B];0At?              ;|debris5|od1_fx_shaking_research_shack_gameobject_grainary     
FSsparkle A  D          ?L        L                ?      B];0At?  B"r              ?L        L                ?      B];0At?            	|debris6     Object_Telephone_Pole A  D         
?                A       A   @@            BH      D      B4      B        c          DH   ?                  ?                  ?                  ?  CD`          
    	 
   
                        	 
   
                                                                     |debris6|e2_phonepole_explode     fx_general A  D           ?                  ?                  ?          uC?  B               ?                  ?                  ?          uC?              |debris6|e3_phonepole_explode     fx_general A  D           ?                  ?                  ?          ffC_4?  B               ?                  ?                  ?          ffC_4?              |debris6|e4_phonepole_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       d     	|debris7     Object_Lamp_Outdoor A  D         ?                A       A   @             BH      D      B4      B        c          DH   ?                  ?                  ?                  ?  C>bZC               	                                                  )|debris7|e1_fx_explode_sparks_gameobject     fx_general A  D         
  ?                  ?l>!        !?l    Bf5C  ?  BnB           ?                  ?l>!        !?l    Bf5C  ?              )|debris7|e2_fx_explode_sparks_gameobject     fx_general A  D         
  ?                  ?                  ?              BQ
?  B               ?                  ?                  ?              BQ
?              &|debris7|od0_fx_shaking_sparks_small1     
FSsparkle A  D          ?                  ?                  ?                  ?  B              ?                  ?                  ?                  ?            	|debris8     
honey_bucket A  D         ?                A       Ap  ?            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  C0C              	 
   
                 
                                                     |debris8|e2_honeybucket_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              &|debris8|od0_fx_shaking_sparks_small1     
FSsparkle A  D          ?ff                ?ff                ?          A4r    ?  B9              ?ff                ?ff                ?          A4r    ?              &|debris8|od1_fx_shaking_sparks_small2     
FSsparkle A  D          ?ff                ?ff                ?          A4r    ?  B9              ?ff                ?ff                ?          A4r    ?       Y     	|debris9     Security_Wall_Post A  D         ?                A       @  ?            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  B!Cm                                                        |debris9|e2_wall_post_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       o     
|debris10     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris10|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris10|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?            
|debris11     
honey_bucket A  D         ?                A       Ap  ?            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  C0C              	 
   
                 
                                                    !|debris11|e2_honeybucket_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              '|debris11|od0_fx_shaking_sparks_small1     
FSsparkle A  D          ?ff                ?ff                ?          A4r    ?  B9              ?ff                ?ff                ?          A4r    ?              '|debris11|od1_fx_shaking_sparks_small2     
FSsparkle A  D          ?ff                ?ff                ?          A4r    ?  B9              ?ff                ?ff                ?          A4r    ?       l     
|debris12     Object_Chainlink_Fence A  D         ?                A       ?  ?             BH      D      B4      B                   DH    ?                  ?                  ?                  ?  CACm                                                                |debris12|e1_dust_explode     fx_general A  D            ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       o     
|debris13     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris13|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris13|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?            
|debris14     Object_Stairs A  D         '?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  CD.q             	 
   
                      ! " # $ % & ' (                   ! " # $                                           |debris14|e1_fireescape_explode     fx_general A  D           ?                  ?                  ?              C?  B               ?                  ?                  ?              C?               |debris14|e2_fireescape_explode     fx_general A  D           ?                  ?                  ?              C?  B               ?                  ?                  ?              C?       o     
|debris15     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris15|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris15|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?            
|debris16    *area51_common_mission_grow.lua: line 1226    j  .--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                         
--                     
--                      
--                     
--                                
--                    
--                                                 
function on_postload()
  childbyoid(619):removefromworld()
end
--                                                 
--                                    
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
 Object_Gas_Tank A  D         H?                A       Ap  @             BH      D      B4      B          u          DH    ?                  ?                  ?                  ?  C-C        	      	 
   
 
                   	  
                                  @   @   @0             |debris16|collision_spline      A  D     @  ?                  ?                  ?      ?-[?    ?  B    ?                  ?                  ?      ?-[?    ?  C   S6x>h^SCS2ChC&SCSS6x            |debris16|e3_gas_explode     fx_general A  D         &  ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris16|od0_tank_shake     
FSsparkle A  D          ?                  ?                  ?                  ?  B              ?                  ?                  ?                  ?              |debris16|od1_tank_shake     
FSsparkle A  D          ?                  ?                  ?                  ?  B              ?                  ?                  ?                  ?              |debris16|od2_tank_shake     
FSsparkle A  D          ?                  ?                  ?                  ?  B              ?                  ?                  ?                  ?       Z     
|debris17     Security_Wall_Post A  D         ?                A       @  ?            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  B!Cm                                                        |debris17|e2_wall_post_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       o     
|debris18     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris18|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris18|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       o     
|debris19     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris19|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris19|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?       o     
|debris20     Object_Cactus A  D         1?                A       Ap  @@            BH      D      B4      B        c          DH    ?                  ?                  ?                  ?  Cq6:C                                                                     |debris20|e2_cactus_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?              |debris20|e3_dust_explode     fx_general A  D           ?                  ?                  ?                  ?  B               ?                  ?                  ?                  ?            /
|debris21    *area51_common_mission_grow.lua: line 1269    k  ---
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                              
--                     
--                      
--                     
--                                
--                    
--                                                 
function on_postload()
  childbyoid(619):removefromworld()
end
--                                                 
--                              
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                         
--                     
--                      
--                     
--                                
--                    
--                                                 
function on_postload()
  childbyoid(619):removefromworld()
end
--                                                 
--                                     
--
--
--
--
--
--
