sequences = {
	{
		id = 1,
		name = 'flythrough',
		interpolation = '__time__',
		duration = 37,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 1.134464,position = {15282.95,-61596.89,-2157.67,},orientation = {0.04,-0.02,0.92,-0.40,},},
			{id = 2,name = 'KeyFrame2',interpolant = 1.26,target = '',link = '',fov = 1.047198,position = {14455.33,-61395.16,-1571.89,},orientation = {-0.02,-0.14,-0.82,0.55,},},
			{id = 3,name = 'KeyFrame3',interpolant = 2.7,target = '',link = '',fov = 1.047198,position = {14034.13,-60002.08,-1524.68,},orientation = {-0.02,-0.12,-0.62,0.77,},},
			{id = 4,name = 'KeyFrame4',interpolant = 4.103186,target = '',link = '',fov = 1.047198,position = {14559.77,-55843.82,-1358.58,},orientation = {0.05,-0.08,-0.55,0.83,},},
			{id = 5,name = 'KeyFrame5',interpolant = 5.996263,target = '',link = '',fov = 1.047198,position = {17079.54,-50388.61,-2253.80,},orientation = {0.01,0.06,-0.69,0.72,},},
			{id = 6,name = 'KeyFrame6',interpolant = 7.962993,target = '',link = '',fov = 1.047198,position = {15550.79,-44766.32,-1349.60,},orientation = {0.03,0.04,-0.68,0.73,},},
			{id = 7,name = 'KeyFrame7',interpolant = 9.5,target = '',link = '',fov = 1.047198,position = {15176.00,-39413.60,-422.94,},orientation = {0.10,0.02,-0.70,0.71,},},
			{id = 8,name = 'KeyFrame8',interpolant = 11.56456,target = '',link = '',fov = 1.047198,position = {15349.63,-33425.90,482.29,},orientation = {-0.15,0.06,0.91,-0.38,},},
			{id = 9,name = 'KeyFrame9',interpolant = 13.15,target = '',link = '',fov = 1.047198,position = {11940.91,-30120.36,150.57,},orientation = {-0.15,0.07,0.90,-0.41,},},
			{id = 10,name = 'KeyFrame10',interpolant = 14.96953,target = '',link = '',fov = 1.047198,position = {9412.34,-24888.00,335.66,},orientation = {0.06,-0.06,-0.73,0.68,},},
			{id = 11,name = 'KeyFrame11',interpolant = 18.00945,target = '',link = '',fov = 1.047198,position = {11236.06,-15112.07,230.11,},orientation = {-0.03,0.13,-0.82,0.56,},},
			{id = 12,name = 'KeyFrame12',interpolant = 20.51604,target = '',link = '',fov = 1.047198,position = {4389.74,-9377.17,1761.74,},orientation = {-0.15,0.05,0.94,-0.32,},},
			{id = 13,name = 'KeyFrame13',interpolant = 22.52636,target = '',link = '',fov = 1.047198,position = {-376.03,-5885.86,2639.32,},orientation = {-0.14,0.04,0.95,-0.27,},},
			{id = 14,name = 'KeyFrame14',interpolant = 25.02802,target = '',link = '',fov = 1.047198,position = {-7456.73,-2524.23,1746.85,},orientation = {-0.02,0.00,0.97,-0.25,},},
			{id = 15,name = 'KeyFrame15',interpolant = 26.90182,target = '',link = '',fov = 1.047198,position = {-13148.71,-335.33,2426.34,},orientation = {0.05,-0.07,-0.89,0.45,},},
			{id = 16,name = 'KeyFrame16',interpolant = 29.75,target = '',link = '',fov = 1.047198,position = {-20284.58,6128.54,2470.89,},orientation = {0.03,0.04,-0.98,0.19,},},
			{id = 17,name = 'KeyFrame17',interpolant = 31.75,target = '',link = '',fov = 1.047198,position = {-25833.34,8170.53,2344.09,},orientation = {-0.05,0.00,1.00,-0.05,},},
			{id = 22,name = 'KeyFrame22',interpolant = 34,target = '',link = '',fov = 1.047199,position = {-30228.62,9198.33,3014.95,},orientation = {-0.12,0.00,0.99,-0.01,},},
			{id = 18,name = 'KeyFrame18',interpolant = 35.75,target = '',link = '',fov = 1.047198,position = {-33394.27,9550.91,2818.33,},orientation = {-0.05,0.00,1.00,0.01,},},
			{id = 19,name = 'KeyFrame19',interpolant = 36.6,target = '',link = '',fov = 1.047198,position = {-35788.34,10385.01,2647.68,},orientation = {-0.01,-0.01,0.84,0.54,},},
			{id = 20,name = 'KeyFrame20',interpolant = 36.6,target = '',link = '',fov = 1.047198,position = {-36529.83,10666.31,2738.76,},orientation = {-0.07,-0.08,0.69,0.71,},},
			{id = 21,name = 'KeyFrame21',interpolant = 37,target = '',link = '',fov = 0.8726646,position = {-37368.68,9967.52,2626.15,},orientation = {0.00,-0.01,0.09,1.00,},},
		},
		events = 
		{
			{id = 1,name = 'start',interpolant = 0,object = 'openingcamera',label = 'cinematic_start',},
			{id = 2,name = 'end',interpolant = 36,object = 'openingcamera',label = 'cinematic_at_end',},
		},
	},
	{
		id = 2,
		name = 'cine_pumpkin_to_cannon',
		interpolation = '__time__',
		duration = 4,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 0.7854,position = {-26731.28,9339.46,2834.33,},orientation = {-0.03,-0.08,0.34,0.94,},},
			{id = 4,name = 'KeyFrame4',interpolant = 1,target = '',link = '',fov = 0.7854,position = {-25550.29,8915.16,2923.29,},orientation = {0.03,0.06,0.39,0.92,},},
			{id = 2,name = 'KeyFrame2',interpolant = 1.9,target = '',link = '',fov = 0.7854,position = {-21166.31,6584.02,3009.44,},orientation = {0.01,0.02,0.34,0.94,},},
			{id = 5,name = 'KeyFrame5',interpolant = 2.5,target = '',link = '',fov = 0.7854,position = {-17711.76,4275.53,2756.94,},orientation = {0.02,0.04,0.38,0.92,},},
			{id = 3,name = 'KeyFrame3',interpolant = 3.1,target = '',link = '',fov = 0.7854,position = {-15770.70,3001.71,2691.85,},orientation = {-0.02,-0.05,0.39,0.92,},},
			{id = 6,name = 'KeyFrame6',interpolant = 4,target = '',link = '',fov = 0.7854,position = {-15187.23,2397.88,2488.37,},orientation = {-0.01,-0.03,0.39,0.92,},},
		},
		events = 
		{
			{id = 1,name = 'start',interpolant = 0,object = 'cine_sequences_mgr',label = 'cinematic_pumpkin_cannon_start',},
			{id = 2,name = 'end',interpolant = 4,object = 'cine_sequences_mgr',label = 'cinematic_pumpkin_cannon_at_end',},
		},
	},
	{
		id = 3,
		name = 'cine_cannon_to_ball',
		interpolation = '__time__',
		duration = 7,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 0.7854,position = {-14446.18,2065.25,2545.34,},orientation = {-0.03,-0.06,0.45,0.89,},},
			{id = 2,name = 'KeyFrame2',interpolant = 0.75,target = '',link = '',fov = 0.7854,position = {-14446.18,2065.25,2545.34,},orientation = {-0.02,-0.04,0.37,0.93,},},
			{id = 8,name = 'KeyFrame8',interpolant = 0.75,target = '',link = '',fov = 0.7854,position = {-14446.18,2065.25,2545.34,},orientation = {-0.02,-0.04,0.37,0.93,},},
			{id = 3,name = 'KeyFrame3',interpolant = 2.1,target = '',link = '',fov = 0.7854,position = {-7798.65,-1560.73,3195.57,},orientation = {-0.02,-0.07,0.34,0.94,},},
			{id = 4,name = 'KeyFrame4',interpolant = 3.75,target = '',link = '',fov = 0.7854,position = {-995.21,-4342.23,3251.48,},orientation = {-0.16,-0.26,0.49,0.81,},},
			{id = 5,name = 'KeyFrame5',interpolant = 4.75,target = '',link = '',fov = 0.7854,position = {3133.71,-8336.71,2337.93,},orientation = {-0.01,-0.05,0.26,0.96,},},
			{id = 6,name = 'KeyFrame6',interpolant = 6,target = '',link = '',fov = 0.7854,position = {5566.65,-11207.63,1745.38,},orientation = {0.00,0.01,0.04,1.00,},},
			{id = 7,name = 'KeyFrame7',interpolant = 7,target = '',link = '',fov = 0.7854,position = {6737.52,-11547.39,1234.89,},orientation = {0.00,0.07,0.05,1.00,},},
		},
		events = 
		{
			{id = 1,name = 'start',interpolant = 0,object = 'cine_sequences_mgr',label = 'cinematic_cannon_ball_start',},
			{id = 2,name = 'end',interpolant = 6,object = 'cine_sequences_mgr',label = 'cinematic_cannon_ball_at_end',},
		},
	},
	{
		id = 4,
		name = 'cine_ball_to_bull',
		interpolation = '__time__',
		duration = 9,
		smooth = true,
		stitch = false,
		loop = false,
		keyframes = 
		{
			{id = 1,name = 'KeyFrame1',interpolant = 0,target = '',link = '',fov = 1.047198,position = {7156.26,-10305.67,1971.53,},orientation = {-0.05,-0.08,0.48,0.87,},},
			{id = 2,name = 'KeyFrame2',interpolant = 1,target = '',link = '',fov = 0.7854,position = {7635.92,-11741.64,2384.76,},orientation = {-0.08,-0.11,0.57,0.81,},},
			{id = 3,name = 'KeyFrame3',interpolant = 2.5,target = '',link = '',fov = 0.7854,position = {8936.27,-16752.16,1399.19,},orientation = {-0.06,-0.06,0.72,0.69,},},
			{id = 4,name = 'KeyFrame4',interpolant = 4,target = '',link = '',fov = 0.7854,position = {8393.62,-20344.08,1293.66,},orientation = {-0.08,-0.10,0.64,0.76,},},
			{id = 5,name = 'KeyFrame5',interpolant = 5.75,target = '',link = '',fov = 0.7854,position = {7992.04,-26007.75,759.32,},orientation = {-0.06,-0.12,0.44,0.89,},},
			{id = 6,name = 'KeyFrame6',interpolant = 8,target = '',link = '',fov = 0.7854,position = {12595.43,-34145.42,-8.17,},orientation = {0.00,-0.04,0.11,0.99,},},
			{id = 7,name = 'KeyFrame7',interpolant = 9,target = '',link = '',fov = 0.7854,position = {13132.15,-34641.76,-55.22,},orientation = {-0.01,-0.04,0.15,0.99,},},
		},
		events = 
		{
			{id = 1,name = 'start',interpolant = 0,object = 'cine_sequences_mgr',label = 'cinematic_ball_bull_start',},
			{id = 2,name = 'end',interpolant = 10,object = 'cine_sequences_mgr',label = 'cinematic_ball_bull_at_end',},
		},
	},
}
--
--
--
--
--
--
--                                       
--                         
--                                
--                  
--                                   
--                                                 
function on_gameplaymoduleactive()
  requestcomplete(true)
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                          
--                               
--                        
--                  
--                                                 
realcine = false
modulecompleted = false

function on_gameplaymoduleactive()
  engine.pushmode(1)
  gomgr.getbyoid(208):dispatchlabel("weatherphase1")
  gomgr.getbyoid(209):dispatchlabel("weatherphase1")
  gomgr.getbyoid(210):dispatchlabel("weatherphase1")
  gomgr.getbyoid(211):dispatchlabel("weatherphase1")
  gomgr.getbyoid(213):dispatchlabel("weatherphase1")
  
  gomgr.getbyoid(655):dispatchlabel("hide")
  gomgr.getbyoid(655):removefromworld()
  gomgr.getbyoid(651):dispatchlabel("hide")
  gomgr.getbyoid(651):removefromworld()
  
  --                               
  gomgr.getbyoid(16).canavatarspindown = false
  gomgr.getbyoid(16):setfujitarating(1.00)

  realcine = true
  
  --                                    
  audio.postflyovervoevent("Play_jb_intro_intro1")
  cinematic.play("flythrough")
--                                   
--                                              
    
  checkforcomplete()

end

function on_label(label)

  if label == "cinematic_start" then
    if realcine == false then
      cameramgr.screenfade(0, 0.0, 0.1, 1.5)
      gomgr.getbyoid(193):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(193):start()
    end

  elseif label == "cinematic_split" then
    if modulecompleted == false or realcine == false then
    end
    
  elseif label == "cinematic_shadow" then
    if modulecompleted == false or realcine == false then
    end
    
  elseif label == "cinematic_at_end" then
    if modulecompleted == false or realcine == false then
    end
  end
end

function checkforcomplete()
  if realcine == true and modulecompleted == false then
    pause(1.0)
    beginwait()
      gomgr.getbyoid(193):settext("textTransitionPrompt", 918)
      gomgr.getbyoid(193):start()
    endwait()
    cameramgr.screenfade(0, 0.7, 0.25, 1.5)
    
    pause(0.8)
    
    modulecompleted = true
    realcine = false
    requestcomplete(true)
    else

  end
end

function on_gameplaymodulecomplete()
  cameramgr.activatecamerakind(1)
  engine.popmode(1)
  
  gomgr.getbyoid(208):dispatchlabel("weatherphase0")
  gomgr.getbyoid(209):dispatchlabel("weatherphase0")
  gomgr.getbyoid(210):dispatchlabel("weatherphase0")
  gomgr.getbyoid(211):dispatchlabel("weatherphase0")
  gomgr.getbyoid(213):dispatchlabel("weatherphase0")
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                    
--                        
--                              
--                  
--                                   
--                                       
--                                       
--                                                 
produce_complete = false
cannon_complete = false
ball_complete = false
paul_ox_complete = false

introText = {
  1220,
  1221,
  1222,
  1477,
}

function on_gameplaymoduleactive()
  gomgr.getbyoid(16).audiostageoverride = 4
  gomgr.getbyoid(16).canavatarspindown = false

  --                               
  gomgr.getbyoid(16):setfujitarating(1.334)
  tornadomgr.setfujitamax(2.00)
  gomgr.getbyoid(16).svlimitmultiplier = 1.07
  gomgr.getbyoid(219):dispatchlabel("weatherphase1")
  
  --          
  gomgr.getbyoid(656):addtoworld()
  gomgr.getbyoid(656):dispatchlabel("idle")
  
  --                 
  gomgr.getbyoid(473):addtoworld()
  gomgr.getbyoid(474):addtoworld()
  gomgr.getbyoid(475):addtoworld()
  gomgr.getbyoid(476):addtoworld()
  gomgr.getbyoid(477):addtoworld()
  gomgr.getbyoid(478):addtoworld()
  gomgr.getbyoid(479):addtoworld()
  gomgr.getbyoid(480):addtoworld()
  gomgr.getbyoid(481):addtoworld()
  gomgr.getbyoid(482):addtoworld()
  gomgr.getbyoid(483):addtoworld()
  gomgr.getbyoid(484):addtoworld()
  gomgr.getbyoid(485):addtoworld()
  gomgr.getbyoid(486):addtoworld()
  gomgr.getbyoid(487):addtoworld()
  gomgr.getbyoid(488):addtoworld()
  gomgr.getbyoid(489):addtoworld()
  gomgr.getbyoid(490):addtoworld()
  gomgr.getbyoid(606):addtoworld()
  gomgr.getbyoid(607):addtoworld()
  gomgr.getbyoid(608):addtoworld()
  gomgr.getbyoid(609):addtoworld()
  gomgr.getbyoid(610):addtoworld()
  gomgr.getbyoid(611):addtoworld()
  gomgr.getbyoid(612):addtoworld()
  gomgr.getbyoid(613):addtoworld()
  gomgr.getbyoid(614):addtoworld()
  gomgr.getbyoid(615):addtoworld()
  gomgr.getbyoid(616):addtoworld()
  gomgr.getbyoid(617):addtoworld()
  gomgr.getbyoid(618):addtoworld()
  gomgr.getbyoid(619):addtoworld()
  gomgr.getbyoid(620):addtoworld()
  gomgr.getbyoid(621):addtoworld()
  gomgr.getbyoid(622):addtoworld()
  gomgr.getbyoid(623):addtoworld()
  
  --                
  gomgr.getbyoid(456):freeze()
  engine.pushmode(1)
  
  --           
  gomgr.getbyoid(3776).location = 1
  gomgr.getbyoid(3776).buttonon = true
  for i = 1, #introText do
    gomgr.getbyoid(3776):settext(" textbox ", introText[i])
    gomgr.getbyoid(3776).finishonbuttonpress = (i == #introText)
    beginwait()
      gomgr.getbyoid(3776):start()
    endwait()
  end
    
  --         
  gomgr.getbyoid(456):unfreeze()
  engine.popmode(1)
  
  --                             
  gomgr.getbyoid(656).path = gomgr.getbyoid(467)
  gomgr.getbyoid(656):dispatchlabel("trainer_fly")
  
  audio.postevent('PLAY_GAME_BEGIN')
end

function produce_destroyed()
  return (not gomgr.getbyoid(657).canbreaknext)  
end

function cannon_destroyed()
  return (not gomgr.getbyoid(684).canbreaknext)  
end

function ball_destroyed()
  return (not gomgr.getbyoid(665).canbreaknext)  
end

function paul_ox_destroyed()
  return (not gomgr.getbyoid(675).canbreaknext and 
          not gomgr.getbyoid(680).canbreaknext)  
end

function on_gameplaymoduleupdate()

  if (not produce_complete and produce_destroyed()) then
    logline("produce_destroyed")
    produce_complete = true
    
    gomgr.getbyoid(219):dispatchlabel("weatherphase2")
    
    engine.pushmode(1)
    beginwait()
      cinematic.play("cine_pumpkin_to_cannon")
    endwait()
    pause(1.2)
    cameramgr.activatecamerakind(1)
    engine.popmode(1)
    audio.postflyovervoevent("Play_jb_intro_intro8")
    
    --                             
    gomgr.getbyoid(473).path = gomgr.getbyoid(238)
    gomgr.getbyoid(474).path = gomgr.getbyoid(239)
    gomgr.getbyoid(475).path = gomgr.getbyoid(240)
    gomgr.getbyoid(476).path = gomgr.getbyoid(241)
    gomgr.getbyoid(477).path = gomgr.getbyoid(242)
    gomgr.getbyoid(478).path = gomgr.getbyoid(243)
    gomgr.getbyoid(479).path = gomgr.getbyoid(244)
    gomgr.getbyoid(480).path = gomgr.getbyoid(245)
    gomgr.getbyoid(481).path = gomgr.getbyoid(246)
    gomgr.getbyoid(482).path = gomgr.getbyoid(247)
    gomgr.getbyoid(483).path = gomgr.getbyoid(248)
    gomgr.getbyoid(484).path = gomgr.getbyoid(249)
    gomgr.getbyoid(485).path = gomgr.getbyoid(250)
    gomgr.getbyoid(486).path = gomgr.getbyoid(251)
    gomgr.getbyoid(487).path = gomgr.getbyoid(252)
    gomgr.getbyoid(488).path = gomgr.getbyoid(253)
    gomgr.getbyoid(489).path = gomgr.getbyoid(254)
    gomgr.getbyoid(490).path = gomgr.getbyoid(255)
    gomgr.getbyoid(606).path = gomgr.getbyoid(256)
    gomgr.getbyoid(607).path = gomgr.getbyoid(257)
    gomgr.getbyoid(608).path = gomgr.getbyoid(258)
    gomgr.getbyoid(609).path = gomgr.getbyoid(259)
    gomgr.getbyoid(610).path = gomgr.getbyoid(260)
    gomgr.getbyoid(611).path = gomgr.getbyoid(261)
    gomgr.getbyoid(612).path = gomgr.getbyoid(262)
    gomgr.getbyoid(613).path = gomgr.getbyoid(263)
    gomgr.getbyoid(614).path = gomgr.getbyoid(264)
    gomgr.getbyoid(615).path = gomgr.getbyoid(265)
    gomgr.getbyoid(616).path = gomgr.getbyoid(266)
    gomgr.getbyoid(617).path = gomgr.getbyoid(267)
    gomgr.getbyoid(618).path = gomgr.getbyoid(268)
    gomgr.getbyoid(619).path = gomgr.getbyoid(269)
    gomgr.getbyoid(620).path = gomgr.getbyoid(270)
    gomgr.getbyoid(621).path = gomgr.getbyoid(271)
    gomgr.getbyoid(622).path = gomgr.getbyoid(272)
    gomgr.getbyoid(623).path = gomgr.getbyoid(273)

    
    gomgr.getbyoid(433):addtoworld()
    gomgr.getbyoid(447):addtoworld()
    gomgr.getbyoid(450):addtoworld()
    gomgr.getbyoid(16).audiostageoverride = 5
    pause(1.0)
    gomgr.getbyoid(447):removefromworld()
    
    
    --                             
    gomgr.getbyoid(656).path = gomgr.getbyoid(462)
    gomgr.getbyoid(656):dispatchlabel("trainer_fly")
    tornadomgr.setfujitamax(2.667)
 --                                          
  end
  
  if (not cannon_complete and cannon_destroyed()) then
    logline("cannon_destroyed")
    cannon_complete = true
    
    gomgr.getbyoid(219):dispatchlabel("weatherphase3")
    
    engine.pushmode(1)
    audio.postflyovervoevent("Play_jb_intro_intro10")
    beginwait()
      cinematic.play("cine_cannon_to_ball")
    endwait()
    pause(1.2)
    cameramgr.activatecamerakind(1)
    engine.popmode(1)
    audio.postflyovervoevent("Play_jb_intro_intro11")
    
    --                             
    gomgr.getbyoid(473).path = gomgr.getbyoid(274)
    gomgr.getbyoid(474).path = gomgr.getbyoid(275)
    gomgr.getbyoid(475).path = gomgr.getbyoid(276)
    gomgr.getbyoid(476).path = gomgr.getbyoid(277)
    gomgr.getbyoid(477).path = gomgr.getbyoid(278)
    gomgr.getbyoid(478).path = gomgr.getbyoid(279)
    gomgr.getbyoid(479).path = gomgr.getbyoid(280)
    gomgr.getbyoid(480).path = gomgr.getbyoid(281)
    gomgr.getbyoid(481).path = gomgr.getbyoid(282)
    gomgr.getbyoid(482).path = gomgr.getbyoid(283)
    gomgr.getbyoid(483).path = gomgr.getbyoid(284)
    gomgr.getbyoid(484).path = gomgr.getbyoid(285)
    gomgr.getbyoid(485).path = gomgr.getbyoid(286)
    gomgr.getbyoid(486).path = gomgr.getbyoid(287)
    gomgr.getbyoid(487).path = gomgr.getbyoid(288)
    gomgr.getbyoid(488).path = gomgr.getbyoid(289)
    gomgr.getbyoid(489).path = gomgr.getbyoid(290)
    gomgr.getbyoid(490).path = gomgr.getbyoid(291)
    gomgr.getbyoid(606).path = gomgr.getbyoid(292)
    gomgr.getbyoid(607).path = gomgr.getbyoid(293)
    gomgr.getbyoid(608).path = gomgr.getbyoid(294)
    gomgr.getbyoid(609).path = gomgr.getbyoid(295)
    gomgr.getbyoid(610).path = gomgr.getbyoid(296)
    gomgr.getbyoid(611).path = gomgr.getbyoid(297)
    gomgr.getbyoid(612).path = gomgr.getbyoid(298)
    gomgr.getbyoid(613).path = gomgr.getbyoid(299)
    gomgr.getbyoid(614).path = gomgr.getbyoid(300)
    gomgr.getbyoid(615).path = gomgr.getbyoid(301)
    gomgr.getbyoid(616).path = gomgr.getbyoid(302)
    gomgr.getbyoid(617).path = gomgr.getbyoid(303)
    gomgr.getbyoid(618).path = gomgr.getbyoid(304)
    gomgr.getbyoid(619).path = gomgr.getbyoid(305)
    gomgr.getbyoid(620).path = gomgr.getbyoid(306)
    gomgr.getbyoid(621).path = gomgr.getbyoid(307)
    gomgr.getbyoid(622).path = gomgr.getbyoid(308)
    gomgr.getbyoid(623).path = gomgr.getbyoid(309)
    
    gomgr.getbyoid(434):addtoworld()
    gomgr.getbyoid(448):addtoworld()
    gomgr.getbyoid(452):addtoworld()
    gomgr.getbyoid(16).audiostageoverride = 6
    pause(1.0)
    gomgr.getbyoid(448):removefromworld()
    
    --                             
    gomgr.getbyoid(656).path = gomgr.getbyoid(463)
    gomgr.getbyoid(656):dispatchlabel("trainer_fly")
    tornadomgr.setfujitamax(3.4)
 --                                          
  end
  
  if (not ball_complete and ball_destroyed()) then
    logline("ball_destroyed")
    ball_complete = true
    
    gomgr.getbyoid(219):dispatchlabel("weatherphase4")
    
    engine.pushmode(1)
    audio.postflyovervoevent("Play_jb_intro_intro12")
    beginwait()
      cinematic.play("cine_ball_to_bull")
    endwait()
    pause(1.2)
    cameramgr.activatecamerakind(1)
    engine.popmode(1)
    audio.postflyovervoevent("Play_jb_intro_intro13")
    
    --                             
    gomgr.getbyoid(473).path = gomgr.getbyoid(310)
    gomgr.getbyoid(474).path = gomgr.getbyoid(311)
    gomgr.getbyoid(475).path = gomgr.getbyoid(312)
    gomgr.getbyoid(476).path = gomgr.getbyoid(313)
    gomgr.getbyoid(477).path = gomgr.getbyoid(314)
    gomgr.getbyoid(478).path = gomgr.getbyoid(315)
    gomgr.getbyoid(479).path = gomgr.getbyoid(316)
    gomgr.getbyoid(480).path = gomgr.getbyoid(317)
    gomgr.getbyoid(481).path = gomgr.getbyoid(318)
    gomgr.getbyoid(482).path = gomgr.getbyoid(319)
    gomgr.getbyoid(483).path = gomgr.getbyoid(320)
    gomgr.getbyoid(484).path = gomgr.getbyoid(321)
    gomgr.getbyoid(485).path = gomgr.getbyoid(322)
    gomgr.getbyoid(486).path = gomgr.getbyoid(323)
    gomgr.getbyoid(487).path = gomgr.getbyoid(324)
    gomgr.getbyoid(488).path = gomgr.getbyoid(325)
    gomgr.getbyoid(489).path = gomgr.getbyoid(326)
    gomgr.getbyoid(490).path = gomgr.getbyoid(327)
    gomgr.getbyoid(606).path = gomgr.getbyoid(328)
    gomgr.getbyoid(607).path = gomgr.getbyoid(329)
    gomgr.getbyoid(608).path = gomgr.getbyoid(330)
    gomgr.getbyoid(609).path = gomgr.getbyoid(331)
    gomgr.getbyoid(610).path = gomgr.getbyoid(332)
    gomgr.getbyoid(611).path = gomgr.getbyoid(333)
    gomgr.getbyoid(612).path = gomgr.getbyoid(334)
    gomgr.getbyoid(613).path = gomgr.getbyoid(335)
    gomgr.getbyoid(614).path = gomgr.getbyoid(336)
    gomgr.getbyoid(615).path = gomgr.getbyoid(337)
    gomgr.getbyoid(616).path = gomgr.getbyoid(338)
    gomgr.getbyoid(617).path = gomgr.getbyoid(339)
    gomgr.getbyoid(618).path = gomgr.getbyoid(340)
    gomgr.getbyoid(619).path = gomgr.getbyoid(341)
    gomgr.getbyoid(620).path = gomgr.getbyoid(342)
    gomgr.getbyoid(621).path = gomgr.getbyoid(343)
    gomgr.getbyoid(622).path = gomgr.getbyoid(344)
    gomgr.getbyoid(623).path = gomgr.getbyoid(345)
    
    gomgr.getbyoid(435):addtoworld()
    gomgr.getbyoid(436):addtoworld()
    gomgr.getbyoid(437):addtoworld()
    gomgr.getbyoid(449):addtoworld()
    gomgr.getbyoid(454):addtoworld()
    gomgr.getbyoid(16).audiostageoverride = 7
    pause(1.0)
    gomgr.getbyoid(449):removefromworld()
    
    --                             
    gomgr.getbyoid(656).path = gomgr.getbyoid(464)
    gomgr.getbyoid(656):dispatchlabel("trainer_fly")
    tornadomgr.setfujitamax(3.6)
    gomgr.getbyoid(16):setfujitarating(3.2)
  end
  
  if (not paul_ox_complete and paul_ox_destroyed()) then
    logline("paul_ox_destroyed")
    paul_ox_complete = true
    gomgr.getbyoid(438):addtoworld()
    pause(1.5)
    
    --                             
    gomgr.getbyoid(656).path = gomgr.getbyoid(465)
    gomgr.getbyoid(656):dispatchlabel("trainer_fly")
    pause(4.0)
    gomgr.getbyoid(655):addtoworld()
    gomgr.getbyoid(655):dispatchlabel("setup")
    gomgr.getbyoid(425):addtoworld()
  end
  
end

function on_label(label)
  if (label == "dinoTriggered") then
    logline("dinoTriggered")
    gomgr.getbyoid(16).canavatarspindown = true
    requestcomplete(true)
  end
end


--                                                 
--                                
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                  
--                                
--                          
--                                   
--                                       
--                                       
--                                                 

function on_gameplaymoduleactive()
  gomgr.getbyoid(16).audiostageoverride = 4
  --                                      
  requestcomplete(true)
end

--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                
--                               
--                                                 

function on_label(label)
  if label == "cinematic_pumpkin_cannon_start" then
      gomgr.getbyoid(660):addtoworld()
      gomgr.getbyoid(660):dispatchlabel("start_toss")
    
  elseif label == "cinematic_pumpkin_cannon_at_end" then

  elseif label == "cinematic_cannon_ball_start" then
      gomgr.getbyoid(662):addtoworld()
      gomgr.getbyoid(662):dispatchlabel("start_fire")
  
  elseif label == "cinematic_cannon_ball_at_end" then
  
  elseif label == "cinematic_ball_bull_start" then
      gomgr.getbyoid(668):addtoworld()
      gomgr.getbyoid(668):dispatchlabel("start_bouncing")
      gomgr.getbyoid(665):dispatchlabel("start_bouncing")
  
  elseif label == "cinematic_ball_bull_at_end" then

  end
end


--                                                 
--                                       
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--
--                                       
--                        
--                          
--                                 
--                  
--                                    
--                                    
--                                                  

complete = false
triggered = false
dinoskilled = false

dinoStartText = {
  1213,
  1214,
  1215,
}

dinoEndText = {
  1212,
}

function on_gameplaymoduleactive()
  logline("dinomission:on_gameplaymoduleactive")
  complete = false
  triggered = false
  dinoskilled = false

  cinematic.stop() 
  cameramgr.deactivatecamera(0, 14, 0)
  
  --                
  --                                      
  gomgr.getbyoid(650):addtoworld()
  gomgr.getbyoid(16).inforceshowavatarstate = true
  gomgr.getbyoid(424):freeze()
  engine.pushmode(1)
  
  --           
  for i = 1, #dinoStartText do
    gomgr.getbyoid(3776).location = 1
    gomgr.getbyoid(3776).buttonon = true
    gomgr.getbyoid(3776):settext(" textbox ", dinoStartText[i])
    gomgr.getbyoid(3776).finishonbuttonpress = (i == #dinoStartText)
    beginwait()
      gomgr.getbyoid(3776):start()
    endwait()
  end
    
  --         
  gomgr.getbyoid(16).inforceshowavatarstate = false
  gomgr.getbyoid(424):unfreeze()  
  engine.popmode(1)
  
  gomgr.getbyoid(219):dispatchlabel("weatherphase0")
  gomgr.getbyoid(213):dispatchlabel("weatherphase1")
  
  --                                  
  gomgr.getbyoid(438):removefromworld()
  gomgr.getbyoid(446):addtoworld()

    --                             
    gomgr.getbyoid(473).path = gomgr.getbyoid(346)
    gomgr.getbyoid(474).path = gomgr.getbyoid(347)
    gomgr.getbyoid(475).path = gomgr.getbyoid(348)
    gomgr.getbyoid(476).path = gomgr.getbyoid(349)
    gomgr.getbyoid(477).path = gomgr.getbyoid(350)
    gomgr.getbyoid(478).path = gomgr.getbyoid(351)
    gomgr.getbyoid(479).path = gomgr.getbyoid(352)
    gomgr.getbyoid(480).path = gomgr.getbyoid(353)
    gomgr.getbyoid(481).path = gomgr.getbyoid(354)
    gomgr.getbyoid(482).path = gomgr.getbyoid(355)
    gomgr.getbyoid(483).path = gomgr.getbyoid(356)
    gomgr.getbyoid(484).path = gomgr.getbyoid(357)
    gomgr.getbyoid(485).path = gomgr.getbyoid(358)
    gomgr.getbyoid(486).path = gomgr.getbyoid(359)
    gomgr.getbyoid(487).path = gomgr.getbyoid(360)
    gomgr.getbyoid(488).path = gomgr.getbyoid(361)
    gomgr.getbyoid(489).path = gomgr.getbyoid(362)
    gomgr.getbyoid(490).path = gomgr.getbyoid(363)
    gomgr.getbyoid(606).path = gomgr.getbyoid(364)
    gomgr.getbyoid(607).path = gomgr.getbyoid(365)
    gomgr.getbyoid(608).path = gomgr.getbyoid(366)
    gomgr.getbyoid(609).path = gomgr.getbyoid(367)
    gomgr.getbyoid(610).path = gomgr.getbyoid(368)
    gomgr.getbyoid(611).path = gomgr.getbyoid(369)
    gomgr.getbyoid(612).path = gomgr.getbyoid(370)
    gomgr.getbyoid(613).path = gomgr.getbyoid(371)
    gomgr.getbyoid(614).path = gomgr.getbyoid(372)
    gomgr.getbyoid(615).path = gomgr.getbyoid(373)
    gomgr.getbyoid(616).path = gomgr.getbyoid(374)
    gomgr.getbyoid(617).path = gomgr.getbyoid(375)
    gomgr.getbyoid(618).path = gomgr.getbyoid(376)
    gomgr.getbyoid(619).path = gomgr.getbyoid(377)
    gomgr.getbyoid(620).path = gomgr.getbyoid(378)
    gomgr.getbyoid(621).path = gomgr.getbyoid(379)
    gomgr.getbyoid(622).path = gomgr.getbyoid(380)
    gomgr.getbyoid(623).path = gomgr.getbyoid(381)
  
  --                                  
  gomgr.getbyoid(16):setfujitarating(3.0)
  tornadomgr.setfujitamax(3.9)
  

  gomgr.getbyoid(655):dispatchlabel("hide")
  gomgr.getbyoid(655):removefromworld()
  gomgr.getbyoid(650):removefromworld()
  
  --                              
  gomgr.getbyoid(656).path = gomgr.getbyoid(466)
  gomgr.getbyoid(656):dispatchlabel("trainer_fly")
  pause(4.0)
  gomgr.getbyoid(651):addtoworld()
  gomgr.getbyoid(651):dispatchlabel("setup")
  
end

function on_label(label)
  if (complete and label == "on_triggered" and not triggered) then
    logline("on_triggered")
    triggered = true
    world.exitworld(0)
  end
end

function dinos_destroyed()
  return (not gomgr.getbyoid(2990).canbreaknext and 
          not gomgr.getbyoid(2997).canbreaknext and 
          not gomgr.getbyoid(1056).canbreaknext and 
          not gomgr.getbyoid(1189).canbreaknext)  
end

function on_gameplaymoduleupdate()

  if (not dinoskilled and dinos_destroyed()) then
    dinoskilled = true
    logline("dinos_destroyed")
    
    --                    
    gomgr.getbyoid(1054):breaknext()
    gomgr.getbyoid(1054):breaknext()
    gomgr.getbyoid(1054):breaknext()
    gomgr.getbyoid(1054):breaknext()
    gomgr.getbyoid(1054):breaknext()
    
    gomgr.getbyoid(651):addtoworld()
    gomgr.getbyoid(651):dispatchlabel("found")
    
    --                                   
    beginwait()
      audio.postevent("play_camera_slowdown")
      time.lerptotimescale(1.0, 0.1)
    endwait()
    engine.pushmode(1)
    for i = 1, #dinoEndText do
      gomgr.getbyoid(3776).location = 0
      gomgr.getbyoid(3776).buttonon = true
      gomgr.getbyoid(3776):settext(" textbox ", dinoEndText[i])
      gomgr.getbyoid(3776).finishonbuttonpress = (i == #dinoEndText)
      beginwait()
        gomgr.getbyoid(3776):start()
      endwait()
    end
    engine.popmode(1)
    time.setscale(1.0)
    gomgr.getbyoid(651):dispatchlabel("setup")
    complete = true
  end
end